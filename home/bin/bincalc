#!/usr/bin/env python3

import pdb
import os
from tempfile import TemporaryDirectory

try:
    import IPython
    os.environ["PYTHONBREAKPOINT"] = "IPython.core.debugger.set_trace"
except ImportError:
    pass

def format_unit(size):
    # 2**10 = 1024
    power = 2 ** 10
    n = 0
    unit = {0: "", 1: "KB", 2: "MB", 3: "GB", 4: "TB", 5: "PB", 6: "EB"}
    while size > power:
        size /= power
        n += 1
    return f"{size:0.1f} {unit[n]}"


def inspect_num(n: int):
    print(f"hex  {hex(n)}")
    print(f"bin  {bin(n)}")
    print(f"dec  {n}")
    print(f"oct  {oct(n)}")
    print(f"unit {format_unit(n)}")


def i(n: int):
    return inspect_num(n)


with TemporaryDirectory() as d:
    os.chdir(d)
    with open(".pdbrc", "w") as f:
        f.write("alias i inspect_num(%1)\n")
    breakpoint()
    "bincalc"
